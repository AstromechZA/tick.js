(function(t){function e(t){this._d=s(t),this._YYYY=this._d.getFullYear(),this._MM=h(this._d.getMonth()+1,2),this._D=""+this._d.getDate(),this._DD=h(this._d.getDate(),2),this._hh=h(this._d.getHours(),2),this._mm=h(this._d.getMinutes(),2),this._ss=h(this._d.getSeconds(),2),this._zzz=h(this._d.getMilliseconds(),3),this._tz=n(this._d.getTimezoneOffset()),this._day=u[this._d.getDay()],this._month=f[this._d.getMonth()],this._knownTimezoneOffset=this._d.getTimezoneOffset()}function n(t){return 0==t?"Z":(v=Math.abs(t),(t>0?"-":"+")+h(Math.floor(v/60),2)+":"+h(v%60,2))}function s(e){return e===t?new Date:i(e)?new Date(+e):"number"==typeof e?new Date(e):"string"==typeof e?new Date(e):void 0}function i(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function h(t,e){return t+="",nl=t.length,nl>=e?t:new Array(e-nl+1).join("0")+t}var o,a="undefined"!=typeof global?global:this,u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],_=/((?:UTC)|(?:GMT))(?:([+-]?)(\d\d?)(?::(\d\d))?)?/,l={PST:480,SAST:-120,PDT:420};e.prototype.toString=function(e){return e===t&&(e="%dd %month %YYYY %hh:%mm:%ss.%zzz %tz"),ns=e.replace("%YYYY",this._YYYY),ns=ns.replace("%MM",this._MM),ns=ns.replace("%dd",this._D),ns=ns.replace("%DD",this._DD),ns=ns.replace("%hh",this._hh),ns=ns.replace("%mm",this._mm),ns=ns.replace("%ss",this._ss),ns=ns.replace("%zzz",this._zzz),ns=ns.replace("%tz",this._tz),ns=ns.replace("%dayofweek",this._day),ns.replace("%month",this._month)},e.prototype.toISO8601=function(){return""+this._YYYY+"-"+this._MM+"-"+this._DD+"T"+this._hh+":"+this._mm+":"+this._ss+"."+this._zzz+this._tz},e.prototype.equals=function(t){return"string"==typeof t?new Date(t).valueOf()==this.valueOf():t.valueOf()==this.valueOf()},e.prototype.valueOf=function(){return this._d.valueOf()},e.prototype.shiftToOffset=function(t){return"number"!=typeof t?null:(r=new e(this.valueOf()+6e4*this._knownTimezoneOffset-6e4*t),r._d=new Date(this.valueOf()),r._tz=n(t),r._knownTimezoneOffset=t,r)},e.prototype.shiftToTZ=function(t){return m=_.exec(t),null!=m?(m[2]=m[2]||"",m[3]=m[3]||"",m[4]=m[4]||"",offset=("-"==m[2]?1:-1)*(60*Number(m[3])+Number(m[4])),this.shiftToOffset(offset)):t in l?this.shiftToOffset(l[t]):null},e.prototype.add=function(t){return new e(this.valueOf()+t)},e.prototype.subtract=function(t){return this.add(-t)},e.prototype.getDate=function(){return this._d},o=function(t){return new e(t)},a.tick=o}).call(this);